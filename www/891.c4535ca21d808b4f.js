"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[891],{891:(F,f,l)=>{l.r(f),l.d(f,{ProductInfoPageModule:()=>k});var g=l(6814),m=l(95),a=l(3134),p=l(3044),d=l(5861),C=l(1254),O=l(7927),t=l(6689),M=l(7704);const b=["swiper"];function h(o,r){if(1&o&&(t.TgZ(0,"swiper-slide")(1,"div",28),t._UZ(2,"img",29),t.TgZ(3,"ion-label",30),t._uU(4),t.qZA()()()),2&o){const c=r.$implicit,e=r.index,n=t.oxw();t.xp6(2),t.Q6J("src",c,t.LSH),t.xp6(2),t.AsE("",e+1," / ",n.images.length,"")}}function v(o,r){if(1&o&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&o){const c=t.oxw();t.xp6(1),t.AsE("",c.price," ",null==c.product?null:c.product.currency,"")}}function y(o,r){if(1&o&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&o){const c=t.oxw();t.xp6(1),t.AsE("",c.discount," ",null==c.product?null:c.product.currency,"")}}function x(o,r){if(1&o&&(t.TgZ(0,"span",32),t._uU(1),t.qZA()),2&o){const c=t.oxw();t.xp6(1),t.AsE("",c.price," ",null==c.product?null:c.product.currency,"")}}function Z(o,r){if(1&o){const c=t.EpF();t.TgZ(0,"ion-chip",37),t.NdJ("click",function(){const i=t.CHM(c).$implicit,s=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.selectAttribute(s.id,i.id))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const c=r.$implicit,e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("outline",n.selectedAttributes[e.id]!==c.id),t.xp6(2),t.Oqu(c.name)}}function I(o,r){if(1&o&&(t.TgZ(0,"div")(1,"ion-label",34),t._uU(2),t.qZA(),t.TgZ(3,"div",35),t.YNc(4,Z,3,2,"ion-chip",36),t.qZA()()),2&o){const c=r.$implicit;t.xp6(2),t.Oqu(c.name),t.xp6(2),t.Q6J("ngForOf",c.values)}}function w(o,r){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,I,5,2,"div",12),t.qZA()),2&o){const c=t.oxw();t.xp6(1),t.Q6J("ngForOf",c.product.attributes)}}function A(o,r){if(1&o){const c=t.EpF();t.TgZ(0,"ion-item")(1,"ion-button",38),t.NdJ("click",function(){t.CHM(c);const n=t.oxw();return t.KtG(n.decreaseQuantity())}),t._uU(2,"-"),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4),t.qZA(),t.TgZ(5,"ion-button",38),t.NdJ("click",function(){t.CHM(c);const n=t.oxw();return t.KtG(n.increaseQuantity())}),t._uU(6,"+"),t.qZA()()}if(2&o){const c=t.oxw();let e;t.xp6(1),t.Q6J("disabled",c.quantity<=1),t.xp6(3),t.Oqu(c.quantity),t.xp6(1),t.Q6J("disabled",c.quantity>=(null!==(e=null==c.product?null:c.product.free_qty)&&void 0!==e?e:0)-(null!==(e=null==c.product?null:c.product.cart_qty)&&void 0!==e?e:0))}}function q(o,r){1&o&&(t.TgZ(0,"ion-item")(1,"ion-label",39),t._uU(2,"Out of Stock"),t.qZA()())}function T(o,r){if(1&o&&(t.TgZ(0,"ion-label"),t._uU(1),t.qZA()),2&o){const c=t.oxw();t.xp6(1),t.hij("In Cart: ",null==c.product?null:c.product.cart_qty,"")}}(0,O.z2)();const z=[{path:"",component:(()=>{var o;class r{constructor(e,n,i,s){this.util=e,this.route=n,this.modalController=i,this.toastController=s,this.index=0,this.slideOpts={initialSlide:0,speed:400,slidesPerView:1,autoplay:!0},this.title="",this.cover="",this.price=0,this.discount=0,this.discountPercentage=0,this.stock=0,this.brand="",this.selectedColor="red",this.selectedSize="s",this.images=[],this.id="",this.product=null,this.selectedAttributes={},this.isCombinationValid=!0,this.quantity=1,this.route.queryParams.subscribe(u=>{this.id=u.id,this.loadProductInfo(this.id)})}ngOnInit(){}loadProductInfo(e){var n=this;return(0,d.Z)(function*(){try{const i=yield n.util.ecommerceService.getProductDetail(e);if(n.product=i.result,n.product){n.title=n.product.name,n.cover=n.util.getApiUrl()+n.product.image_url,n.images=[n.cover,...n.product.photos.map(s=>n.util.getApiUrl()+s.url)];for(const s of n.product.attributes)s.values.length>0&&(n.selectedAttributes[s.id]=s.values[0].id);n.fetchCombinationInfo(n.getCombinationAttributes())}}catch(i){console.error("Error loading product info",i)}})()}onBack(){this.util.onBack()}getDiscountedPrice(e,n){const i=Number(e);return(i-i*(Number(n)/100)).toFixed(2)}changeColor(e){this.selectedColor=e}changeSize(e){this.selectedSize=e}slideChanged(e){var n;this.index=null===(n=this.swiper)||void 0===n?void 0:n.nativeElement.swiper.activeIndex}openVariations(){var e=this;return(0,d.Z)(function*(){const n=yield e.modalController.create({component:C.t,cssClass:"variations_modal",componentProps:{index:e.id}});n.onDidDismiss().then(()=>{e.util.navigateRoot("tabs/cart")}),yield n.present()})()}selectAttribute(e,n){this.selectedAttributes[e]=n,this.fetchCombinationInfo(this.getCombinationAttributes())}getCombinationAttributes(){return Object.values(this.selectedAttributes)}fetchCombinationInfo(e){var n=this;return(0,d.Z)(function*(){try{if(n.product)if(1===n.product.attributes.length){n.isCombinationValid=!0;const i=n.product.combinations[0];i&&n.updateProductInfo(i)}else{const i=n.product.combinations.find(s=>e.every(u=>Object.values(s.attributes).some(_=>_.id===u)));i?(n.isCombinationValid=!0,n.updateProductInfo(i)):n.isCombinationValid=!1}}catch(i){console.error("Error fetching combination info",i),n.isCombinationValid=!1}})()}updateProductInfo(e){var n=this;return(0,d.Z)(function*(){try{const i=yield n.util.ecommerceService.getCombinationInfo(n.product.template_id,e.id,n.getCombinationAttributes(),1);i&&(n.product.price={base_price:i.price,price_reduce:i.price_extra,discount_percentage:i.has_discounted_price?(i.list_price-i.price)/i.list_price*100:0},n.product.free_qty=i.free_qty,n.product.cart_qty=i.cart_qty,n.product.id=i.product_id,n.price=i.price,n.cover=n.util.getApiUrl()+i.image_url,n.images=[n.cover,...n.product.photos.map(s=>n.util.getApiUrl()+s.url)])}catch(i){console.error("Error updating product info with combination",i)}})()}increaseQuantity(){this.product&&this.quantity<this.product.free_qty-this.product.cart_qty&&(this.quantity+=1)}decreaseQuantity(){this.quantity>1&&(this.quantity-=1)}addToCart(){var e=this;return(0,d.Z)(function*(){const n=e.getCombinationAttributes(),i=[],_=[],J=[],Q={quantity:e.quantity,website_id:1,lang:"en_US"};try{yield e.util.ecommerceService.addToCart(e.product.id,e.quantity,n,i,!1,!1,_,J,Q),yield(yield e.toastController.create({message:"Added to cart successfully.",duration:2e3,position:"top"})).present()}catch(P){yield(yield e.toastController.create({message:"Failed to add to cart. Please try again.",duration:2e3,position:"top"})).present(),console.error("Error adding to cart",P)}})()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.Y36(M.f),t.Y36(p.gz),t.Y36(a.IN),t.Y36(a.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-info"]],viewQuery:function(e,n){if(1&e&&t.Gf(b,5),2&e){let i;t.iGM(i=t.CRH())&&(n.swiper=i.first)}},decls:43,vars:11,consts:[[1,"ion-no-border"],["mode","md","color","primary"],["slot","start"],["color","light",3,"click"],["slot","icon-only","name","chevron-back-outline"],["slot","end"],["color","light"],["slot","icon-only","name","bag-handle-outline"],["slot","icon-only","name","share-social-outline"],[1,"product-info-screen"],["slides-per-view","1","speed","400",3,"slidechange"],["swiper",""],[4,"ngFor","ngForOf"],[1,"product-info"],["size","12"],[1,"price-tag"],[1,"price"],["class","active",4,"ngIf"],["class","deactive",4,"ngIf"],[1,"title"],[1,"product-info-other"],[1,"desc"],["class","attributes-section",4,"ngIf"],[1,"spacer"],["size","6"],[4,"ngIf"],["expand","block","fill","solid","color","primary",3,"disabled","click"],["slot","start","name","cart-outline"],[1,"top-images"],["alt","",1,"img",3,"src"],[1,"lbl"],[1,"active"],[1,"deactive"],[1,"attributes-section"],[1,"attribute-title"],[1,"attribute-values"],["color","primary",3,"outline","click",4,"ngFor","ngForOf"],["color","primary",3,"outline","click"],[3,"disabled","click"],["color","danger"]],template:function(e,n){if(1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),t.NdJ("click",function(){return n.onBack()}),t._UZ(4,"ion-icon",4),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Product Details"),t.qZA(),t.TgZ(7,"ion-buttons",5)(8,"ion-button",6),t._UZ(9,"ion-icon",7),t.qZA(),t.TgZ(10,"ion-button",6),t._UZ(11,"ion-icon",8),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",9)(14,"swiper-container",10,11),t.NdJ("slidechange",function(s){return n.slideChanged(s)}),t.YNc(16,h,5,3,"swiper-slide",12),t.qZA(),t.TgZ(17,"ion-row",13)(18,"ion-col",14)(19,"div",15)(20,"ion-label",16),t.YNc(21,v,2,2,"span",17),t.YNc(22,y,2,2,"span",17),t._uU(23," \xa0 "),t.YNc(24,x,2,2,"span",18),t.qZA()(),t.TgZ(25,"ion-label",19),t._uU(26),t.qZA(),t.TgZ(27,"div",20)(28,"ion-label",21),t._uU(29),t.qZA()()()(),t.YNc(30,w,2,1,"div",22),t._UZ(31,"div",23),t.qZA()(),t.TgZ(32,"ion-footer")(33,"ion-toolbar")(34,"ion-row")(35,"ion-col",24),t.YNc(36,A,7,3,"ion-item",25),t.YNc(37,q,3,0,"ion-item",25),t.qZA(),t.TgZ(38,"ion-col",24)(39,"ion-button",26),t.NdJ("click",function(){return n.addToCart()}),t._UZ(40,"ion-icon",27),t._uU(41," Add to Cart "),t.qZA(),t.YNc(42,T,2,1,"ion-label",25),t.qZA()()()()),2&e){let i;t.xp6(16),t.Q6J("ngForOf",n.images),t.xp6(5),t.Q6J("ngIf",n.discountPercentage<=0),t.xp6(1),t.Q6J("ngIf",n.discountPercentage>0),t.xp6(2),t.Q6J("ngIf",n.discountPercentage>0),t.xp6(2),t.hij(" ",n.title," "),t.xp6(3),t.Oqu(null==n.product?null:n.product.description),t.xp6(1),t.Q6J("ngIf",n.product&&n.product.attributes&&n.product.attributes.length>0),t.xp6(6),t.Q6J("ngIf",((null==n.product?null:n.product.free_qty)||0)>0),t.xp6(1),t.Q6J("ngIf",0===((null==n.product?null:n.product.free_qty)||0)),t.xp6(2),t.Q6J("disabled",0===((null==n.product?null:n.product.free_qty)||0)||n.quantity>(null!==(i=null==n.product?null:n.product.free_qty)&&void 0!==i?i:0)-(null!==(i=null==n.product?null:n.product.cart_qty)&&void 0!==i?i:0)),t.xp6(3),t.Q6J("ngIf",null==n.product?null:n.product.cart_qty)}},dependencies:[g.sg,g.O5,a.YG,a.Sm,a.hM,a.wI,a.W2,a.fr,a.Gu,a.gu,a.Ie,a.Q$,a.Nd,a.wd,a.sr],styles:[".product-info-screen[_ngcontent-%COMP%]{padding:16px}.product-info-screen[_ngcontent-%COMP%]   .top-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover}.product-info-screen[_ngcontent-%COMP%]   .top-images[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:rgba(0,0,0,.6);color:#fff;padding:4px 8px;border-radius:4px}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{margin-top:16px}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:green}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:green}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .deactive[_ngcontent-%COMP%]{color:red;text-decoration:line-through}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]{font-size:1em;color:gray}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-top:8px}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]{display:flex;align-items:center}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{font-size:1.2em;color:gold;margin-right:4px}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{font-size:1em;color:gold;margin-right:8px}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]   .lbl-total[_ngcontent-%COMP%]{font-size:.9em;color:gray}.product-info-screen[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .cashback[_ngcontent-%COMP%]{font-size:.9em;color:green;margin-bottom:16px}.product-info-screen[_ngcontent-%COMP%]   .attributes-section[_ngcontent-%COMP%]{margin-top:16px;padding:16px}.product-info-screen[_ngcontent-%COMP%]   .attributes-section[_ngcontent-%COMP%]   .attribute-title[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .attributes-section[_ngcontent-%COMP%]   .attribute-values[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.product-info-screen[_ngcontent-%COMP%]   .attributes-section[_ngcontent-%COMP%]   .attribute-values[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:4px;cursor:pointer}.product-info-screen[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#e0e0e0;margin:16px 0}.product-info-screen[_ngcontent-%COMP%]   .product-info-other[_ngcontent-%COMP%]{padding:0}.product-info-screen[_ngcontent-%COMP%]   .product-info-other[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .product-info-other[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:1em;color:gray;line-height:1.5;margin-bottom:5px}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2em;font-weight:700;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .star-list[_ngcontent-%COMP%]{display:flex;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:.9em;color:gray}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .review-stats[_ngcontent-%COMP%]   .lbl-content[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .review-stats[_ngcontent-%COMP%]   .lbl-content[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{font-size:1em;margin-right:8px}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .review-stats[_ngcontent-%COMP%]   .lbl-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{flex-grow:1;height:4px;background-color:#e0e0e0;position:relative}.product-info-screen[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   .review-stats[_ngcontent-%COMP%]   .lbl-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{position:absolute;height:4px;background-color:green}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{display:flex;align-items:center}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-size:cover;background-position:center;margin-right:8px}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1.1em}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]{display:flex;align-items:center}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1em;margin-right:8px}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .top-content[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]   .more-icon[_ngcontent-%COMP%]{font-size:1.5em}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.9em;color:gray;margin-bottom:8px}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .bottom-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .bottom-data[_ngcontent-%COMP%]   .icon-date[_ngcontent-%COMP%]{display:flex;align-items:center}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .bottom-data[_ngcontent-%COMP%]   .icon-date[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9em;margin-left:4px}.product-info-screen[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .bottom-data[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{flex-grow:1}"]}),r})()}];let U=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(z),p.Bz]}),r})(),k=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,m.u5,a.Pc,U]}),r})()}}]);