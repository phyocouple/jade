"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2841],{2841:(M,d,l)=>{l.r(d),l.d(d,{ByCategoryPageModule:()=>I});var g=l(6814),m=l(95),r=l(3134),p=l(3044),u=l(5861),y=l(2095),_=l(8639),f=l(553),e=l(6689),h=l(7704);function Z(o,a){if(1&o&&(e.TgZ(0,"div",33)(1,"ion-label",8),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij("",t.discountPercentage,"%")}}function P(o,a){if(1&o&&(e.TgZ(0,"ion-label",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" > ",t.stock,"")}}function b(o,a){if(1&o&&(e.TgZ(0,"ion-label",34),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("Sold By : ",t.brand.length>14?e.Dn7(2,1,t.brand,0,14)+"..":t.brand," ")}}function C(o,a){if(1&o&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.currency," ",t.price.price_reduce," ")}}function T(o,a){if(1&o&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.currency,"",t.price.price_reduce,"")}}function v(o,a){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.currency,"",t.price.base_price,"")}}const B=function(o){return{"background-image":o}};function x(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",16),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onProductInfo(c.id))}),e.TgZ(1,"ion-card",17)(2,"div",18),e.YNc(3,Z,3,1,"div",19),e.TgZ(4,"div",20),e._UZ(5,"ion-icon",21),e.qZA()(),e.TgZ(6,"div",22)(7,"ion-label",23),e._uU(8),e.ALo(9,"slice"),e.qZA(),e.TgZ(10,"ion-label",8),e._uU(11),e.ALo(12,"slice"),e.qZA(),e.TgZ(13,"div",24),e._UZ(14,"ion-icon",25),e.TgZ(15,"ion-label",8),e._uU(16),e.qZA(),e.TgZ(17,"ion-label",8),e._uU(18," | "),e.qZA(),e.YNc(19,P,2,1,"ion-label",26),e.qZA(),e.YNc(20,b,3,5,"ion-label",27),e.TgZ(21,"ion-label",28),e.YNc(22,C,2,2,"span",29),e.YNc(23,T,2,2,"span",29),e._uU(24," \xa0 "),e.YNc(25,v,2,2,"span",30),e.qZA(),e.TgZ(26,"div",31),e._UZ(27,"ion-icon",32),e.qZA()()()()}if(2&o){const t=a.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngStyle",e.VKq(18,B,"url("+i.apiUrl+t.image_url+")")),e.xp6(1),e.Q6J("ngIf",t.price.base_price),e.xp6(5),e.hij(" ",t.name.length>20?e.Dn7(9,10,t.name,0,20)+"..":t.name,""),e.xp6(3),e.hij(" ",t.description.length>20?e.Dn7(12,14,t.description,0,20)+"..":t.description," "),e.xp6(5),e.hij(" ",t.rating," "),e.xp6(3),e.Q6J("ngIf",t.stock),e.xp6(1),e.Q6J("ngIf",t.brand),e.xp6(2),e.Q6J("ngIf",!t.price.base_price),e.xp6(1),e.Q6J("ngIf",t.price.base_price>0),e.xp6(2),e.Q6J("ngIf",t.price.base_price>0)}}const A=[{path:"",component:(()=>{var o;class a{constructor(i,n,c){this.util=i,this.route=n,this.modalController=c,this.name="",this.id="",this.products=[],this.page=1,this.ppg=20,this.totalPages=0,this.apiUrl=f.N.apiUrl,this.route.queryParams.subscribe(s=>{this.name!==s.name&&(this.name=s.name,this.id=s.id,this.resetState(),this.loadProductsByCategory())})}ngOnInit(){this.loadProductsByCategory()}onBack(){this.util.onBack()}getDiscountedPrice(i,n){return(i-i*(n/100)).toFixed(2)}onProductInfo(i){this.util.navigateToPage("product-info",{queryParams:{id:i}})}presentModal(){var i=this;return(0,u.Z)(function*(){yield(yield i.modalController.create({component:_.y})).present()})()}onSearch(){var i=this;return(0,u.Z)(function*(){yield(yield i.modalController.create({component:y.Z})).present()})()}loadProductsByCategory(){var i=this;return(0,u.Z)(function*(){try{const n={page:i.page,category:i.id,search:"",min_price:0,max_price:1e4,ppg:i.ppg},c=yield i.util.ecommerceService.getProductList(n);i.products=c.result.products,i.totalPages=c.result.pager.pages}catch(n){console.error("Error loading products by category",n)}})()}loadMoreProducts(i){var n=this;return(0,u.Z)(function*(){if(n.page++,n.page>n.totalPages)i.target.disabled=!0;else try{const c={page:n.page,category:n.id,search:"",min_price:0,max_price:1e4,ppg:n.ppg},s=yield n.util.ecommerceService.getProductList(c);n.products=[...n.products,...s.result.products],i.target.complete(),n.page>=n.totalPages&&(i.target.disabled=!0)}catch(c){console.error("Error loading more products",c),i.target.complete()}})()}resetState(){this.products=[],this.page=1,this.totalPages=0}}return(o=a).\u0275fac=function(i){return new(i||o)(e.Y36(h.f),e.Y36(p.gz),e.Y36(r.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-by-category"]],decls:21,vars:2,consts:[[1,"ion-no-border"],["mode","ios","color","primary"],["slot","start"],["color","light",3,"click"],["slot","icon-only","name","chevron-back-outline"],[1,"top-search-favourite"],["lines","none",1,"search-bar-favourite",3,"click"],["slot","start","name","search-outline","color","medium"],[1,"lbl"],["expand","block","fill","clear","color","light",3,"click"],["slot","icon-only","name","options-outline"],[1,"home-screen"],[1,"product-list-grid"],["size","6",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more products..."],["size","6",3,"click"],["mode","ios",1,"product-info"],[1,"cover-image",3,"ngStyle"],["class","discount-banner",4,"ngIf"],[1,"heart-icon"],["name","heart","color","light"],[1,"bottom-content"],[1,"title"],[1,"more-info"],["name","star","color","warning"],["class","lbl",4,"ngIf"],["class","sold-by",4,"ngIf"],[1,"price"],["class","active",4,"ngIf"],["class","deactive",4,"ngIf"],[1,"cart-btn"],["name","bag-add-outline","color","light"],[1,"discount-banner"],[1,"sold-by"],[1,"active"],[1,"deactive"]],template:function(i,n){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),e.NdJ("click",function(){return n.onBack()}),e._UZ(4,"ion-icon",4),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-toolbar",1)(8,"div",5)(9,"ion-item",6),e.NdJ("click",function(){return n.onSearch()}),e._UZ(10,"ion-icon",7),e.TgZ(11,"ion-label",8),e._uU(12,"Search for favourite items"),e.qZA()(),e.TgZ(13,"ion-button",9),e.NdJ("click",function(){return n.presentModal()}),e._UZ(14,"ion-icon",10),e.qZA()()()(),e.TgZ(15,"ion-content")(16,"div",11)(17,"ion-row",12),e.YNc(18,x,28,20,"ion-col",13),e.qZA(),e.TgZ(19,"ion-infinite-scroll",14),e.NdJ("ionInfinite",function(s){return n.loadMoreProducts(s)}),e._UZ(20,"ion-infinite-scroll-content",15),e.qZA()()()),2&i&&(e.xp6(6),e.Oqu(n.name),e.xp6(12),e.Q6J("ngForOf",n.products))},dependencies:[g.sg,g.O5,g.PC,r.YG,r.Sm,r.PM,r.wI,r.W2,r.Gu,r.gu,r.ju,r.MB,r.Ie,r.Q$,r.Nd,r.wd,r.sr,g.OU],styles:['@charset "UTF-8";']}),a})()}];let U=(()=>{var o;class a{}return(o=a).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(A),p.Bz]}),a})(),I=(()=>{var o;class a{}return(o=a).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,m.u5,r.Pc,U]}),a})()}}]);